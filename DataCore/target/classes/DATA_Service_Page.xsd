<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
   xmlns="http://www.zlmwork.com/zmqueryform"
   xmlns:vo="http://www.zlmwork.com/zmvoengine"
   targetNamespace="http://www.zlmwork.com/zmqueryform"
	 elementFormDefault="qualified" attributeFormDefault="unqualified" >
	<xs:import namespace="http://www.zlmwork.com/zmvoengine" schemaLocation="VO_SCHEMA_2013.xsd" />
	<xs:element name="ENTER_NAME_OF_ROOT_ELEMENT_HERE">
		<xs:annotation>
			<xs:documentation>
				请求服务，用来提供Form 操作 
				用来定义查询请求的结构, 请求定义中，需要能进行
				Clinet 发出的请求， 请求的json 字符串， JSON 转成XML 
				进行处理。
			</xs:documentation>
		</xs:annotation>
	</xs:element>
	
	<xs:element name="queryFormNode" type="QueryFormNode"/>
	<xs:element name="queryRequest" type="QueryRequest" substitutionGroup="queryFormNode" />
	
	<xs:element name="requestPart" type="RequestPart" substitutionGroup="queryFormNode" />
	<xs:element name="requestPartGroup" type="RequestPartGroup" substitutionGroup="requestPart" />
	<xs:element name="requestColumn" type="RequestColumn" substitutionGroup="requestPart" />
	<xs:element name="conditionColumn" type="ConditionColumn" substitutionGroup="requestPart" />
	<xs:element name="orderByColumn" type="OrderByColumn" substitutionGroup="requestPart" />
	
	<!--条件格式-->
	<xs:element name="conditionSyntax" type="ConditionSyntax" substitutionGroup="queryFormNode" />
	<xs:element name="complexConditionSyntax" type="ComplexConditionSyntax" substitutionGroup="conditionSyntax" />
	<xs:element name="feildConditionSyntax" type="FeildConditionSyntax" substitutionGroup="conditionSyntax" />	
	
	<xs:element name="requestField" type="RequestField" substitutionGroup="queryFormNode" />
	<xs:element name="requestFieldGroup" type="RequestFieldGroup" substitutionGroup="requestField" />
	<xs:element name="simpleField" type="SimpleField" substitutionGroup="requestField" />
	<xs:element name="conditionField" type="ConditionField" substitutionGroup="requestField" />
	<xs:element name="orderByField" type="OrderByField" substitutionGroup="requestField" />
	
	
	<xs:complexType name="QueryFormNode">
		<xs:attribute name="code" type="xs:string"/>
		<xs:attribute name="index" type="xs:integer"/>
	</xs:complexType>
	
	<xs:complexType name="QueryRequest">
		<xs:complexContent>
			<xs:extension base="QueryFormNode">
				<xs:sequence>
					<xs:element ref="requestPart" minOccurs="0" maxOccurs="unbounded" />
				</xs:sequence>
			</xs:extension>
		</xs:complexContent>
	</xs:complexType>
	
	<xs:complexType name="RequestPart">
		<xs:complexContent>
			<xs:extension base="QueryFormNode" />
		</xs:complexContent>
	</xs:complexType>
	
	<xs:complexType name="RequestPartGroup">
		<xs:complexContent>
			<xs:extension base="RequestPart" >
				<xs:sequence>
					<xs:element ref="requestPart" minOccurs="0" maxOccurs="unbounded" />
				</xs:sequence>
			</xs:extension>
		</xs:complexContent>
	</xs:complexType>
	
	<!-- 数据的请求 -->
	<xs:complexType name="RequestColumn">
		<xs:complexContent>
			<xs:extension base="RequestPart" >
				<xs:sequence>
					<xs:element ref="requestField" minOccurs="0" />
				</xs:sequence>
			</xs:extension>
		</xs:complexContent>
	</xs:complexType>
	
	<xs:complexType name="ConditionColumn">
		<xs:complexContent>
			<xs:extension base="RequestPart" >
				<xs:sequence>
					<xs:element ref="conditionSyntax" minOccurs="0" />
				</xs:sequence>
			</xs:extension>
		</xs:complexContent>
	</xs:complexType>
	
	<!-- 条件 -->
	<xs:complexType name="ConditionSyntax">
		<xs:complexContent>
			<xs:extension base="QueryFormNode" />
		</xs:complexContent>
	</xs:complexType>
	
	<!-- 等同于括号 -->
	<xs:complexType name="ComplexConditionSyntax">
		<xs:complexContent>
			<xs:extension base="ConditionSyntax" >
				<xs:sequence>
					<xs:element ref="conditionSyntax" minOccurs="0" maxOccurs="unbounded" />
				</xs:sequence>
				<xs:attribute name="operation" type="vo:OperationLogical" />
			</xs:extension>
		</xs:complexContent>
	</xs:complexType>
	
	<xs:complexType name="FeildConditionSyntax">
		<xs:complexContent>
			<xs:extension base="ConditionSyntax" >
				<xs:sequence>
					<xs:element ref="requestField" />
				</xs:sequence>
			</xs:extension>
		</xs:complexContent>
	</xs:complexType>
	
	<xs:complexType name="OrderByColumn">
		<xs:complexContent>
			<xs:extension base="RequestColumn" />
		</xs:complexContent>
	</xs:complexType>
	
	<xs:complexType name="RequestField">
		<xs:complexContent>
			<xs:extension base="QueryFormNode" />
		</xs:complexContent>
	</xs:complexType>
	
	<xs:complexType name="RequestFieldGroup">
		<xs:complexContent>
			<xs:extension base="RequestField" >
				<xs:sequence>
					<xs:element ref="requestField" minOccurs="0" maxOccurs="unbounded" />
				</xs:sequence>
			</xs:extension>
		</xs:complexContent>
	</xs:complexType>
	
	<xs:complexType name="SimpleField">
		<xs:complexContent>
			<xs:extension base="RequestField" >
				<xs:attribute name="field" type="xs:string" />								
				<xs:attribute name="value" type="xs:string" />		
			</xs:extension>			
		</xs:complexContent>
	</xs:complexType>
	
	<xs:complexType name="ConditionField">
		<xs:complexContent>
			<xs:extension base="SimpleField" >
				<xs:attribute name="operation" type="vo:FieldLogical" />			
			</xs:extension>
		</xs:complexContent>
	</xs:complexType>
	
	<xs:complexType name="OrderByField">
		<xs:complexContent>
			<xs:extension base="SimpleField" >
				<xs:attribute name="operation" type="vo:OrderDirection" />			
			</xs:extension>
		</xs:complexContent>
	</xs:complexType>

</xs:schema>
